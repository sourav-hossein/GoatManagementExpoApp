import React from 'react';
import { StyleSheet, View, FlatList } from 'react-native';
import { useTheme } from 'react-native-paper';
import { useAppSelector } from '@/store/hooks';
import EmptyState from '@/components/EmptyState';
import BreedingRecordListItem from '@/components/BreedingRecordListItem';

type BreedingTabProps = {
  goatId: string;
};

export default function BreedingTab({ goatId }: BreedingTabProps) {
  const { colors } = useTheme();
  const { records } = useAppSelector((state) => state.breeding);
  const goatBreedingRecords = records.filter(r => r.motherId === goatId || r.fatherId === goatId);

  if (goatBreedingRecords.length === 0) {
    return (
      <View style={[styles.container, { backgroundColor: colors.background }]}>
        <EmptyState
          title="No Breeding History"
          message="Mating records and birth outcomes for this goat will be displayed here."
        />
      </View>
    );
  }

  return (
    <FlatList
      data={goatBreedingRecords}
      keyExtractor={(item) => item.id}
      renderItem={({ item }) => <BreedingRecordListItem record={item} />}
      contentContainerStyle={[styles.list, { backgroundColor: colors.background }]}
    />
  );
}

const styles = StyleSheet.create({
  container: { flex: 1, justifyContent: 'center', alignItems: 'center' },
  list: { flex: 1, paddingTop: 16, paddingHorizontal: 16 },
});
